https://coursehunter.net/course/devsecops-bootcamp?lesson=58 - lesson ZAP
https://hub.docker.com/r/securecodebox/zap - image


# DAST
**DAST (Dynamic Application Security Testing)** - динамическое тестирование безопасности приложения:
```
zap:
  stage: deploy-test
  image: securecodebox/zap
  needs: ["deploy_test"]
  before_script:
    - mkdir -p /zap/wrk
  script:
    - zap-baseline.py -t $ZAP_TARGET -g gen.conf -I -x baseline.xml
    - cp /zap/wrk/baseline.xml baseline.xml
  artifacts:
    when: always
    paths: 
      - baseline.xml
  tags:
    - $RUNNER_TAG
```

`zap-baseline.py` и `zap-full-scan.py` это два разных скрипта для управления сканированием с использованием OWASP ZAP (Zed Attack Proxy), оба из которых выполняют различные типы сканирования. Вот основные различия между ними:

### zap-baseline.py

- **Цель**: Этот скрипт предназначен для выполнения базового сканирования веб-приложения. Он быстро проверяет наличие наиболее распространенных уязвимостей, таких как XSS, SQL-инъекции и другие OWASP Top Ten уязвимости.
- **Скорость и простота**: `zap-baseline.py` обычно выполняется быстрее и требует меньше настроек, чем `zap-full-scan.py`. Это делает его хорошим выбором для первичных проверок или тестирования после развертывания (например, для CI/CD пайплайнов).
- **Подход**: Он может использовать автоматизированные отзывы и предоставляет отчет о найденных уязвимостях в виде XML или HTML. Он также собирает базовые данные и может быть настроен на разные уровни детальности.

**Пример использования:**

```bash
zap-baseline.py -t http://example.com -g gen.conf -I -x baseline.xml
```

### zap-full-scan.py

- **Цель**: Этот скрипт предназначен для более комплексного и глубинного сканирования веб-приложения. Он выполняет более детальную проверку с глубоким анализом сайтов и может использовать дополнительные функции ZAP для сложных сценариев сканирования.
- **Глубина сканирования**: `zap-full-scan.py` выполняет полное сканирование, что может включать работу с сессиями, пользовательскими сценариями, тем самым проверяя более сложные уязвимости и уровни взаимодействия пользователя.
- **Требования по времени**: Полное сканирование может занять больше времени по сравнению с базовым, так как оно проверяет большее количество уязвимостей и привлекает больше ресурсов.

**Пример использования:**

```bash
zap-full-scan.py -t http://example.com -g gen.conf -I -x fullscan_report.xml
```

### Основные отличия в итогах

- **Скорость**: `zap-baseline.py` быстрее и проще, чем `zap-full-scan.py`.
- **Глубина анализа**: `zap-full-scan.py` выполняет более глубокое сканирование, предоставляя более детальную информацию о потенциальных уязвимостях.
- **Отчеты**: Оба скрипта могут генерировать отчеты, но `zap-full-scan.py` может предоставить более подробную и обширную информацию.

### Когда использовать каждый из них

- Используйте **`zap-baseline.py`** для быстрого начального анализа перед более детальным тестированием или в CI/CD для регулярного мониторинга.
- Используйте **`zap-full-scan.py`** для более глубоких и всеобъемлющих проверок, когда требуются более детальные отчеты о безопасности или если нужно исследовать сложные сценарии взаимодействия с приложением.