## Git hooks.
### ./.git/hooks/pre-commit - файл

### Инструкция по настройке Git Hook (pre-commit)

#### Что такое Git Hook?

Git Hooks — это скрипты, которые Git запускает автоматически при определённых событиях в процессе работы с репозиторием. Один из самых популярных хуков — `pre-commit`, который выполняется перед созданием коммита. Это позволяет автоматизировать проверки кода, форматирование, запуск тестов и другие задачи, что помогает поддерживать качество кода и предотвращать ошибки.

#### Зачем нужен pre-commit Hook?

`pre-commit` hook позволяет выполнять определённые проверки или задачи перед тем, как изменения будут зафиксированы в репозитории. Например, можно использовать этот хук для:

- Автоматической проверки кода на наличие уязвимостей или секретов (например, с помощью Gitleaks).
- Запуска различных тестов или линтеров.
- Проверки стиля кода или семантики.
- Форматирования кода (например, с помощью Prettier или ESLint).

#### Как настроить pre-commit Hook

Вот пошаговая инструкция по настройке и использованию `pre-commit` hook в вашем проекте на основе предоставленных шагов:

1. **Перейдите в папку хук-системы Git**:
   ```bash
   ls ./.git/hooks
   ```

2. **Создайте новый файл `pre-commit`**:
   Вы можете начать с образца или создать новый файл:
   ```bash
   vi ./.git/hooks/pre-commit.sample
   vi ./.git/hooks/pre-commit
   ```

3. **Редактируйте файл `pre-commit`**:
   Введите необходимый скрипт для выполнения. В вашем случае код для проверки с использованием Gitleaks будет выглядеть так:
   ```bash
   docker pull ghcr.io/zricethezav/gitleaks:latest
   docker run -v /Users/andreyshabunov/PhpstormProjects/devsecops-bootcamp-group/juice-shop-main:/path zricethezav/gitleaks:latest detect --source="/path" --verbose
   ```

4. **Проверьте, что файл `pre-commit` имеет необходимый символ исполнения**:
   Установите права на выполнение:
   ```bash
   chmod 777 ./.git/hooks/pre-commit
   ```

5. **Добавьте изменения в индекс**:
   После настройки хуков добавьте все изменения:
   ```bash
   git add .
   ```

6. **Проверьте статус репозитория**:
   Убедитесь, что все изменения готовы к коммиту:
   ```bash
   git status
   ```

7. **Создайте коммит**:
   Пробуйте создать коммит. Если в коде будут обнаружены секреты или уязвимости, Gitleaks выдаст соответствующее сообщение, и коммит не будет создан:
   ```bash
   git commit -m "check gitleaks pre-commit"
   ```

8. **Посмотрите историю коммитов**:
   Вы можете просмотреть историю коммитов, чтобы убедиться, что коммиты были созданы успешно (при отсутствии нарушений):
   ```bash
   git log
   ```

### Заключение

Настройка `pre-commit` hook — это простой и эффективный способ улучшить качество вашего кода и автоматизировать процессы проверки. Используя Gitleaks, вы можете убедиться, что в вашем коде нет утечек секретной информации перед тем, как изменения попадут в репозиторий. Это добавляет дополнительный уровень защиты и помогает поддерживать безопасность вашего проекта.